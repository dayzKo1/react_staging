{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\AAA\\\\Desktop\\\\react_staging\\\\my-app\\\\src\\\\pages\\\\Battle\\\\index.jsx\";\nimport React, { Component } from 'react';\nimport axios from \"axios\";\nimport \"./index.css\";\nimport { NavLink } from \"react-router-dom\";\nimport { Container, Row, Col, Button } from 'react-bootstrap';\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faUsers, faFighterJet, faTrophy } from \"@fortawesome/free-solid-svg-icons\";\nimport { Spinner } from 'react-bootstrap'; //初始页面\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass BattleBegin extends Component {\n  constructor(props) {\n    super(props);\n\n    this.getPlayerOne = async () => {\n      //得到Player One输入框的值\n      const inputOne = this.refs.inputOne.value; //判断是否为空\n\n      if (inputOne.match(/^[ ]*$/)) {\n        alert(\"Player One不能为空！\");\n        this.refs.inputOne.value = \"\";\n        return;\n      } //得到Player One的url\n\n\n      const urlOne = `https://api.github.com/search/repositories?q=${inputOne}`; //开始查找\n\n      this.setState({\n        loadingOne: true\n      });\n\n      try {\n        const res = await axios.get(urlOne); //判断返回值是否为空\n\n        if (res.data.total_count === 0) {\n          this.setState({\n            notFoundPlayerOne: true\n          });\n          this.refs.inputOne.value = \"\";\n          return;\n        } //返回值不为空，调用Battle里的setPlayerOne函数存值\n\n\n        this.props.setPlayerOne(res.data.items[0]); //标识已找到\n\n        this.setState({\n          isOne: true,\n          notFoundPlayerOne: false,\n          errorOne: false\n        });\n      } catch (e) {\n        if (e.response) {\n          //console.log(\"getPlayerOne: \", e.response.data.message);\n          this.setState({\n            errorOne: true,\n            errorOneMessage: e.response.data.message\n          });\n        }\n      }\n\n      this.setState({\n        loadingOne: false\n      });\n\n      if (this.state.isOne && this.state.isTwo) {\n        this.refs.battle.disabled = \"\";\n      } else {\n        this.refs.battle.disabled = \"disabled\";\n      }\n    };\n\n    this.findOneAgain = () => {\n      this.props.setPlayerOne({});\n      this.setState({\n        isOne: false\n      });\n      this.refs.battle.disabled = \"disabled\";\n    };\n\n    this.getPlayerTwo = async () => {\n      const inputTwo = this.refs.inputTwo.value;\n\n      if (inputTwo.match(/^[ ]*$/)) {\n        alert(\"Player Two不能为空！\");\n        this.refs.inputTwo.value = \"\";\n        return;\n      }\n\n      const urlTwo = `https://api.github.com/search/repositories?q=${inputTwo}`;\n      this.setState({\n        loadingTwo: true\n      });\n\n      try {\n        const res = await axios.get(urlTwo);\n\n        if (res.data.total_count === 0) {\n          this.setState({\n            notFoundPlayerTwo: true\n          });\n          this.refs.inputTwo.value = \"\";\n          return;\n        }\n\n        this.props.setPlayerTwo(res.data.items[0]);\n        this.setState({\n          isTwo: true,\n          notFoundPlayerTwo: false,\n          errorTwo: false\n        });\n      } catch (e) {\n        if (e.response) {\n          //console.log(\"getPlayerTwo: \", e.response.data.message);\n          this.setState({\n            errorTwo: true,\n            errorTwoMessage: e.response.data.message\n          });\n        }\n      }\n\n      this.setState({\n        loadingTwo: false\n      });\n\n      if (this.state.isOne && this.state.isTwo) {\n        this.refs.battle.disabled = \"\";\n      } else {\n        this.refs.battle.disabled = \"disabled\";\n      }\n    };\n\n    this.findTwoAgain = () => {\n      this.props.setPlayerTwo({});\n      this.setState({\n        isTwo: false\n      });\n      this.refs.battle.disabled = \"disabled\";\n    };\n\n    this.oneInputChange = () => {\n      const inputOne = this.refs.inputOne.value;\n\n      if (inputOne.match(/^[ ]*$/)) {\n        this.refs.submitOne.className = \"disabled\";\n        return;\n      }\n\n      this.refs.submitOne.className = \"Button-primary\";\n    };\n\n    this.twoInputChange = () => {\n      const inputTwo = this.refs.inputTwo.value;\n\n      if (inputTwo.match(/^[ ]*$/)) {\n        this.refs.submitTwo.disabled = \"disabled\";\n        return;\n      }\n\n      this.refs.submitTwo.disabled = \"\";\n    };\n\n    this.oneEnter = e => {\n      if (e.key === \"Enter\") {\n        this.getPlayerOne();\n      }\n    };\n\n    this.twoEnter = e => {\n      if (e.key === \"Enter\") {\n        this.getPlayerTwo();\n      }\n    };\n\n    this.state = {\n      isOne: false,\n      isTwo: false,\n      loadingOne: false,\n      loadingTwo: false,\n      notFoundPlayerOne: false,\n      notFoundPlayerTwo: false,\n      errorOne: false,\n      errorTwo: false,\n      errorOneMessage: \"\",\n      errorTwoMessage: \"\"\n    };\n  } //查找Player One\n\n\n  render() {\n    const {\n      playerOne,\n      playerTwo\n    } = this.props;\n    const {\n      isOne,\n      isTwo,\n      loadingOne,\n      loadingTwo,\n      notFoundPlayerOne,\n      notFoundPlayerTwo,\n      errorOne,\n      errorOneMessage,\n      errorTwo,\n      errorTwoMessage\n    } = this.state;\n    let renderInfoOne;\n    let renderInfoTwo;\n\n    if (notFoundPlayerOne) {\n      renderInfoOne = /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\u672A\\u627E\\u5230\\u8BE5\\u7528\\u6237\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 9\n      }, this);\n    } else if (errorOne) {\n      renderInfoOne = alert(errorOneMessage);\n    }\n\n    if (notFoundPlayerTwo) {\n      renderInfoTwo = /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\u672A\\u627E\\u5230\\u8BE5\\u7528\\u6237\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 9\n      }, this);\n    } else if (errorTwo) {\n      renderInfoTwo = alert(errorTwoMessage);\n    }\n\n    return /*#__PURE__*/_jsxDEV(Container, {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        style: {\n          textAlign: 'center',\n          marginBottom: 30\n        },\n        children: \"Instructions\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        style: {\n          textAlign: 'center',\n          marginBottom: 30\n        },\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          lg: 4,\n          md: 4,\n          sm: 6,\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"Enter Two Github Users\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n            style: {\n              color: '#ffbf74',\n              fontSize: 150\n            },\n            icon: faUsers\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          lg: 4,\n          md: 4,\n          sm: 6,\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"Battle\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n            style: {\n              color: '#b8e2f2',\n              fontSize: 150\n            },\n            icon: faFighterJet\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          lg: 4,\n          md: 4,\n          sm: 6,\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"See The Winner\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n            style: {\n              color: '#ffdf36',\n              fontSize: 150\n            },\n            icon: faTrophy\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        style: {\n          textAlign: 'center'\n        },\n        children: \"Fight\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        style: {\n          textAlign: 'center'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          lg: 6,\n          md: 6,\n          sm: 12,\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"Player One\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 13\n          }, this), loadingOne ? /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [\"\\u6B63\\u5728\\u67E5\\u627E\", /*#__PURE__*/_jsxDEV(Spinner, {\n              animation: \"border\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 213,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 15\n          }, this) : isOne ? /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {},\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  textAlign: 'center'\n                },\n                children: /*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"primary\",\n                  onClick: this.findOneAgain,\n                  children: \"\\u91CD\\u8BD5\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 219,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 218,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: [\"playerName:\", playerOne.name]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 223,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  className: \"img-thumbnail lazyload\",\n                  \"data-src\": playerOne.owner.avatar_url,\n                  alt: playerOne.name,\n                  style: {\n                    height: 100,\n                    width: 100\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 225,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 224,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 217,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              ref: \"inputOne\",\n              placeholder: \"\\u8F93\\u5165Player One\",\n              onChange: this.oneInputChange,\n              onKeyDown: this.oneEnter\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 236,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"primary\",\n              onClick: this.getPlayerOne,\n              ref: \"submitOne\",\n              className: \"disabled\",\n              children: \"\\u67E5\\u627E\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 242,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: renderInfoOne\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 250,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          lg: 6,\n          md: 6,\n          sm: 12,\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"Player Two\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 256,\n            columnNumber: 13\n          }, this), loadingTwo ? /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [\"\\u6B63\\u5728\\u67E5\\u627E\", /*#__PURE__*/_jsxDEV(Spinner, {\n              animation: \"border\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 260,\n              columnNumber: 23\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 259,\n            columnNumber: 17\n          }, this) : isTwo ? /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {},\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                textAlign: 'center'\n              },\n              children: /*#__PURE__*/_jsxDEV(Button, {\n                variant: \"primary\",\n                onClick: this.findTwoAgain,\n                children: \"\\u91CD\\u8BD5\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 265,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 264,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"playerName:\", playerTwo.name]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 269,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                className: \"img-thumbnail lazyload\",\n                \"data-src\": playerTwo.owner.avatar_url,\n                alt: playerTwo.name,\n                style: {\n                  height: 100,\n                  width: 100\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 271,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 270,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 263,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {},\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              ref: \"inputTwo\",\n              placeholder: \"\\u8F93\\u5165Player Two\",\n              onChange: this.twoInputChange,\n              onKeyDown: this.twoEnter\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 281,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"primary\",\n              onClick: this.getPlayerTwo,\n              ref: \"submitTwo\",\n              disabled: \"\",\n              children: \"\\u67E5\\u627E\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 287,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: renderInfoTwo\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 295,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 280,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          textAlign: 'center'\n        },\n        children: /*#__PURE__*/_jsxDEV(NavLink, {\n          to: {\n            pathname: `/BattleResult`,\n            search: `?user1=${playerOne.name}&user2=${playerTwo.name}`,\n            state: {\n              playerOne,\n              playerTwo\n            }\n          },\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            ref: \"battle\",\n            variant: \"primary\",\n            disabled: \"disabled\",\n            children: \"Battle\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 314,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 302,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 7\n    }, this);\n  }\n\n} //Battle\n\n\nexport default class Battle extends Component {\n  constructor(props) {\n    super(props);\n\n    this.setPlayerOne = oneData => {\n      this.setState({\n        playerOne: oneData\n      });\n    };\n\n    this.setPlayerTwo = twoData => {\n      this.setState({\n        playerTwo: twoData\n      });\n    };\n\n    this.state = {\n      playerOne: {},\n      //存储第一个数据\n      playerTwo: {} //存储第二个数据\n\n    };\n  } //通过参数设置存储第一个数据\n\n\n  render() {\n    const {\n      playerOne,\n      playerTwo\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(BattleBegin, {\n      setPlayerOne: this.setPlayerOne,\n      setPlayerTwo: this.setPlayerTwo,\n      playerOne: playerOne,\n      playerTwo: playerTwo\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 346,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["C:/Users/AAA/Desktop/react_staging/my-app/src/pages/Battle/index.jsx"],"names":["React","Component","axios","NavLink","Container","Row","Col","Button","FontAwesomeIcon","faUsers","faFighterJet","faTrophy","Spinner","BattleBegin","constructor","props","getPlayerOne","inputOne","refs","value","match","alert","urlOne","setState","loadingOne","res","get","data","total_count","notFoundPlayerOne","setPlayerOne","items","isOne","errorOne","e","response","errorOneMessage","message","state","isTwo","battle","disabled","findOneAgain","getPlayerTwo","inputTwo","urlTwo","loadingTwo","notFoundPlayerTwo","setPlayerTwo","errorTwo","errorTwoMessage","findTwoAgain","oneInputChange","submitOne","className","twoInputChange","submitTwo","oneEnter","key","twoEnter","render","playerOne","playerTwo","renderInfoOne","renderInfoTwo","textAlign","marginBottom","color","fontSize","name","owner","avatar_url","height","width","pathname","search","Battle","oneData","twoData"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport axios from \"axios\";\r\nimport \"./index.css\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { Container, Row, Col, Button } from 'react-bootstrap';\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faUsers, faFighterJet, faTrophy } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { Spinner } from 'react-bootstrap';\r\n\r\n\r\n//初始页面\r\nclass BattleBegin extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      isOne: false,\r\n      isTwo: false,\r\n      loadingOne: false,\r\n      loadingTwo: false,\r\n      notFoundPlayerOne: false,\r\n      notFoundPlayerTwo: false,\r\n      errorOne: false,\r\n      errorTwo: false,\r\n      errorOneMessage: \"\",\r\n      errorTwoMessage: \"\",\r\n    };\r\n  }\r\n  //查找Player One\r\n  getPlayerOne = async () => {\r\n    //得到Player One输入框的值\r\n    const inputOne = this.refs.inputOne.value;\r\n    //判断是否为空\r\n    if (inputOne.match(/^[ ]*$/)) {\r\n      alert(\"Player One不能为空！\");\r\n      this.refs.inputOne.value = \"\";\r\n      return;\r\n    }\r\n    //得到Player One的url\r\n    const urlOne = `https://api.github.com/search/repositories?q=${inputOne}`;\r\n    //开始查找\r\n    this.setState({ loadingOne: true });\r\n    try {\r\n      const res = await axios.get(urlOne);\r\n      //判断返回值是否为空\r\n      if (res.data.total_count === 0) {\r\n        this.setState({\r\n          notFoundPlayerOne: true,\r\n        });\r\n        this.refs.inputOne.value = \"\";\r\n        return;\r\n      }\r\n      //返回值不为空，调用Battle里的setPlayerOne函数存值\r\n      this.props.setPlayerOne(res.data.items[0]);\r\n      //标识已找到\r\n      this.setState({ isOne: true, notFoundPlayerOne: false, errorOne: false });\r\n    } catch (e) {\r\n      if (e.response) {\r\n        //console.log(\"getPlayerOne: \", e.response.data.message);\r\n        this.setState({\r\n          errorOne: true,\r\n          errorOneMessage: e.response.data.message,\r\n        });\r\n      }\r\n    }\r\n    this.setState({ loadingOne: false });\r\n    if (this.state.isOne && this.state.isTwo) {\r\n      this.refs.battle.disabled = \"\"\r\n    } else {\r\n      this.refs.battle.disabled = \"disabled\"\r\n    }\r\n  };\r\n  //重新查找Player One\r\n  findOneAgain = () => {\r\n    this.props.setPlayerOne({});\r\n    this.setState({ isOne: false });\r\n    this.refs.battle.disabled = \"disabled\"\r\n  };\r\n  //查找Player Two\r\n  getPlayerTwo = async () => {\r\n    const inputTwo = this.refs.inputTwo.value;\r\n    if (inputTwo.match(/^[ ]*$/)) {\r\n      alert(\"Player Two不能为空！\");\r\n      this.refs.inputTwo.value = \"\";\r\n      return;\r\n    }\r\n    const urlTwo = `https://api.github.com/search/repositories?q=${inputTwo}`;\r\n    this.setState({ loadingTwo: true });\r\n    try {\r\n      const res = await axios.get(urlTwo);\r\n      if (res.data.total_count === 0) {\r\n        this.setState({\r\n          notFoundPlayerTwo: true,\r\n        });\r\n        this.refs.inputTwo.value = \"\";\r\n        return;\r\n      }\r\n      this.props.setPlayerTwo(res.data.items[0]);\r\n      this.setState({ isTwo: true, notFoundPlayerTwo: false, errorTwo: false });\r\n    } catch (e) {\r\n      if (e.response) {\r\n        //console.log(\"getPlayerTwo: \", e.response.data.message);\r\n        this.setState({\r\n          errorTwo: true,\r\n          errorTwoMessage: e.response.data.message,\r\n        });\r\n      }\r\n    }\r\n    this.setState({ loadingTwo: false });\r\n\r\n    if (this.state.isOne && this.state.isTwo) {\r\n      this.refs.battle.disabled = \"\"\r\n    } else {\r\n      this.refs.battle.disabled = \"disabled\"\r\n    }\r\n  };\r\n  //重新查找player two\r\n  findTwoAgain = () => {\r\n    this.props.setPlayerTwo({});\r\n    this.setState({ isTwo: false });\r\n    this.refs.battle.disabled = \"disabled\";\r\n  };\r\n  //输入框里的值为空时Submit不可点击\r\n  oneInputChange = () => {\r\n    const inputOne = this.refs.inputOne.value;\r\n    if (inputOne.match(/^[ ]*$/)) {\r\n      this.refs.submitOne.className = \"disabled\";\r\n      return;\r\n    }\r\n    this.refs.submitOne.className = \"Button-primary\";\r\n  };\r\n  twoInputChange = () => {\r\n    const inputTwo = this.refs.inputTwo.value;\r\n    if (inputTwo.match(/^[ ]*$/)) {\r\n      this.refs.submitTwo.disabled =\"disabled\";\r\n      return;\r\n    }\r\n    this.refs.submitTwo.disabled = \"\";\r\n  };\r\n  //当焦点在Player One的输入框并按下enter键时\r\n  oneEnter = (e) => {\r\n    if (e.key === \"Enter\") {\r\n      this.getPlayerOne();\r\n    }\r\n  };\r\n  //当焦点在Player Two\r\n  twoEnter = (e) => {\r\n    if (e.key === \"Enter\") {\r\n      this.getPlayerTwo();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { playerOne, playerTwo } = this.props;\r\n    const {\r\n      isOne,\r\n      isTwo,\r\n      loadingOne,\r\n      loadingTwo,\r\n      notFoundPlayerOne,\r\n      notFoundPlayerTwo,\r\n      errorOne,\r\n      errorOneMessage,\r\n      errorTwo,\r\n      errorTwoMessage,\r\n    } = this.state;\r\n    let renderInfoOne;\r\n    let renderInfoTwo;\r\n    if (notFoundPlayerOne) {\r\n      renderInfoOne = (\r\n        <p>\r\n          未找到该用户\r\n        </p>\r\n      );\r\n    } else if (errorOne) {\r\n      renderInfoOne = (\r\n        alert(errorOneMessage)\r\n      );\r\n    }\r\n    if (notFoundPlayerTwo) {\r\n      renderInfoTwo = (\r\n        <p>\r\n          未找到该用户\r\n        </p>\r\n      );\r\n    } else if (errorTwo) {\r\n      renderInfoTwo = (\r\n        alert(errorTwoMessage)\r\n      );\r\n    }\r\n    return (\r\n      <Container>\r\n        <h1 style={{ textAlign: 'center', marginBottom: 30 }}>Instructions</h1>\r\n        <Row style={{ textAlign: 'center', marginBottom: 30 }}>\r\n          <Col lg={4} md={4} sm={6}>\r\n            <h4>Enter Two Github Users</h4>\r\n            <FontAwesomeIcon style={{ color: '#ffbf74', fontSize: 150 }} icon={faUsers} />\r\n          </Col >\r\n          <Col lg={4} md={4} sm={6}>\r\n            <h4>Battle</h4>\r\n            <FontAwesomeIcon style={{ color: '#b8e2f2', fontSize: 150 }} icon={faFighterJet} />\r\n          </Col>\r\n          <Col lg={4} md={4} sm={6}>\r\n            <h4>See The Winner</h4>\r\n            <FontAwesomeIcon style={{ color: '#ffdf36', fontSize: 150 }} icon={faTrophy} />\r\n          </Col>\r\n        </Row>\r\n        <h1 style={{ textAlign: 'center' }}>Fight</h1>\r\n        <Row style={{ textAlign: 'center' }}>\r\n          <Col lg={6} md={6} sm={12}>\r\n            <h4>Player One</h4>\r\n            {loadingOne ? (\r\n              <div>\r\n                正在查找<Spinner animation=\"border\" />\r\n              </div>\r\n            ) : isOne ? (\r\n              <div style={{}}>\r\n                <div >\r\n                  <div style={{ textAlign: 'center' }}>\r\n                    <Button variant=\"primary\" onClick={this.findOneAgain}>\r\n                      重试\r\n                    </Button>\r\n                  </div>\r\n                  <span>playerName:{playerOne.name}</span>\r\n                  <div>\r\n                    <img\r\n                      className=\"img-thumbnail lazyload\"\r\n                      data-src={playerOne.owner.avatar_url}\r\n                      alt={playerOne.name}\r\n                      style={{ height: 100, width: 100 }}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <div>\r\n                <input\r\n                  ref=\"inputOne\"\r\n                  placeholder=\"输入Player One\"\r\n                  onChange={this.oneInputChange}\r\n                  onKeyDown={this.oneEnter}\r\n                ></input>\r\n                <Button\r\n                  variant=\"primary\"\r\n                  onClick={this.getPlayerOne}\r\n                  ref=\"submitOne\"\r\n                  className=\"disabled\"\r\n                >\r\n                  查找\r\n                </Button>\r\n                <div>{renderInfoOne}</div>\r\n              </div>\r\n            )}\r\n\r\n          </Col>\r\n          <Col lg={6} md={6} sm={12}>\r\n            <h4>Player Two</h4>\r\n            {\r\n              loadingTwo ? (\r\n                <div>\r\n                  正在查找<Spinner animation=\"border\" />\r\n                </div>\r\n              ) : isTwo ? (\r\n                <div style={{}}>\r\n                  <div style={{ textAlign: 'center' }}>\r\n                    <Button variant=\"primary\" onClick={this.findTwoAgain}>\r\n                      重试\r\n                    </Button>\r\n                  </div>\r\n                  <span>playerName:{playerTwo.name}</span>\r\n                  <div>\r\n                    <img\r\n                      className=\"img-thumbnail lazyload\"\r\n                      data-src={playerTwo.owner.avatar_url}\r\n                      alt={playerTwo.name}\r\n                      style={{ height: 100, width: 100 }}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              ) : (\r\n                <div style={{}}>\r\n                  <input\r\n                    ref=\"inputTwo\"\r\n                    placeholder=\"输入Player Two\"\r\n                    onChange={this.twoInputChange}\r\n                    onKeyDown={this.twoEnter}\r\n                  ></input>\r\n                  <Button\r\n                    variant=\"primary\"\r\n                    onClick={this.getPlayerTwo}\r\n                    ref=\"submitTwo\"\r\n                    disabled=\"\"\r\n                  >\r\n                    查找\r\n                  </Button>\r\n                  <div>{renderInfoTwo}</div>\r\n                </div>\r\n              )\r\n            }\r\n          </Col>\r\n        </Row>\r\n\r\n        <div style={{ textAlign: 'center' }}>\r\n\r\n          <NavLink\r\n            to={{\r\n              pathname: `/BattleResult`,\r\n              search: `?user1=${playerOne.name}&user2=${playerTwo.name}`,\r\n              state: {\r\n                playerOne,\r\n                playerTwo,\r\n              },\r\n            }}\r\n          >\r\n            <Button ref=\"battle\" variant=\"primary\" disabled=\"disabled\">Battle</Button>\r\n          </NavLink>\r\n\r\n        </div>\r\n\r\n      </Container>\r\n    );\r\n  }\r\n}\r\n//Battle\r\nexport default class Battle extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      playerOne: {}, //存储第一个数据\r\n      playerTwo: {}, //存储第二个数据\r\n    };\r\n  }\r\n  //通过参数设置存储第一个数据\r\n  setPlayerOne = (oneData) => {\r\n    this.setState({\r\n      playerOne: oneData,\r\n    });\r\n  };\r\n  setPlayerTwo = (twoData) => {\r\n    this.setState({\r\n      playerTwo: twoData,\r\n    });\r\n  };\r\n  render() {\r\n    const { playerOne, playerTwo } = this.state;\r\n    return (\r\n      <BattleBegin\r\n        setPlayerOne={this.setPlayerOne}\r\n        setPlayerTwo={this.setPlayerTwo}\r\n        playerOne={playerOne}\r\n        playerTwo={playerTwo}\r\n      ></BattleBegin>\r\n\r\n    );\r\n  }\r\n}"]},"metadata":{},"sourceType":"module"}