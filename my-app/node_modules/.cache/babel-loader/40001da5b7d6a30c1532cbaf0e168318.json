{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\lhh_react\\\\my-app\\\\src\\\\pages\\\\Popular\\\\index.jsx\";\nimport React, { Component } from 'react';\nimport axios from \"axios\";\nimport { NavLink } from \"react-router-dom\";\nimport MyCard from \"../../components/MyCard\";\nimport Load from \"../../components/Load\";\nimport InfiniteScroll from \"react-infinite-scroller\";\nimport { Container, Row, Col } from 'react-bootstrap';\nimport { Spinner } from 'react-bootstrap';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class Popular extends Component {\n  constructor(props) {\n    super(props);\n\n    this.switchTab = (e, {\n      name,\n      url\n    }) => {\n      this.setState({\n        githubData: [],\n        tabName: name,\n        tabUrl: url,\n        pageNum: 1,\n        hasMore: true,\n        error: false\n      });\n      setTimeout(() => {\n        this.FetchGit();\n      }, 200);\n    };\n\n    this.state = {\n      tabList: [{\n        name: \"All\",\n        url: \"https://api.github.com/search/repositories?q=stars:%3E11&sort=stars&order=desc&type=Repositories&page=\"\n      }, {\n        name: \"java\",\n        url: \"https://api.github.com/search/repositories?q=stars:%3E11+language:java&sort=stars&order=desc&type=Repositories&page=\"\n      }, {\n        name: \"javascript\",\n        url: \"https://api.github.com/search/repositories?q=stars:%3E11+language:javascript&sort=stars&order=desc&type=Repositories&page=\"\n      }, {\n        name: \"css\",\n        url: \"https://api.github.com/search/repositories?q=stars:%3E11+language:css&sort=stars&order=desc&type=Repositories&page=\"\n      }, {\n        name: \"ruby\",\n        url: \"https://api.github.com/search/repositories?q=stars:%3E1+language:ruby&sort=stars&order=desc&type=Repositories&page=\"\n      }, {\n        name: \"python\",\n        url: \"https://api.github.com/search/repositories?q=stars:%3E1+language:python&sort=stars&order=desc&type=Repositories&page=\"\n      }],\n      tabName: \"All\",\n      tabUrl: \"https://api.github.com/search/repositories?q=stars:%3E11&sort=stars&order=desc&type=Repositories&page=\",\n      githubData: [],\n      count: 0,\n      loading: true,\n      pageNum: 1,\n      pageTotal: 5,\n      hasMore: true,\n      errorContent: {},\n      error: false\n    };\n  }\n\n  //获得数据\n  async FetchGit() {\n    if (this.state.count === 0) {\n      // const name = localStorage.getItem(\"name\");\n      let obj = {}; // console.log(window.location.href);\n\n      if (window.location.href.includes(\"?\")) {\n        let arr = window.location.href.split(\"?\")[1].split(\"&\");\n\n        for (let i = 0; i < arr.length; i++) {\n          let res = arr[i].split(\"=\");\n          obj[res[0]] = res[1];\n        }\n      }\n\n      console.log(obj.language);\n\n      if (obj.language) {\n        try {\n          const tabUrl = `https://api.github.com/search/repositories?q=stars:%3E1+language:${obj.language}&sort=stars&order=desc&type=Repositories&page=`;\n          const url = tabUrl + this.state.pageNum;\n          const res = await axios.get(url); // console.log(res);\n\n          this.setState({\n            githubData: res.data.items,\n            loading: false,\n            count: this.state.count + 1,\n            name: obj.language,\n            tabUrl: tabUrl,\n            pageNum: 2\n          });\n          const filterOption = document.getElementById(obj.language); // console.log(filterOption);\n\n          if (filterOption) {\n            document.querySelectorAll(\".tab-list.active\").forEach(btn => btn.classList.remove(\"active\"));\n            filterOption.classList.add(\"active\");\n          }\n        } catch (e) {\n          const errorContent = e.response.data.message;\n          this.setState({\n            githubData: [],\n            errorContent,\n            error: true\n          });\n        }\n      } else {\n        const {\n          pageNum,\n          tabUrl,\n          githubData,\n          pageTotal\n        } = this.state;\n\n        if (pageNum > pageTotal) {\n          this.setState({\n            hasMore: false\n          });\n          return;\n        }\n\n        try {\n          const url = tabUrl + pageNum;\n          const res = await axios.get(url);\n          this.setState({\n            githubData: githubData.concat(res.data.items),\n            loading: false,\n            pageNum: pageNum + 1\n          });\n          const filterOption = document.getElementById(\"All\");\n\n          if (filterOption) {\n            document.querySelectorAll(\".tab-list.active\").forEach(btn => btn.classList.remove(\"active\"));\n            filterOption.classList.add(\"active\");\n          }\n        } catch (e) {\n          const errorContent = e.response.data.message;\n          this.setState({\n            githubData: [],\n            errorContent,\n            error: true\n          });\n        }\n      }\n    } else {\n      const {\n        pageNum,\n        tabUrl,\n        githubData,\n        pageTotal\n      } = this.state;\n\n      if (pageNum > pageTotal) {\n        this.setState({\n          hasMore: false\n        });\n        return;\n      }\n\n      try {\n        const url = tabUrl + pageNum;\n        const res = await axios.get(url); // console.log(res);\n\n        this.setState({\n          githubData: githubData.concat(res.data.items),\n          loading: false,\n          pageNum: pageNum + 1,\n          error: false\n        });\n      } catch (e) {\n        const errorContent = e.response.data.message; // console.log(e.response.data.message);\n\n        this.setState({\n          githubData: [],\n          errorContent,\n          error: true\n        });\n      }\n    }\n  }\n\n  componentDidMount() {\n    document.querySelectorAll(\".tab-list.active\").forEach(btn => {\n      btn.classList.remove(\"active\");\n    });\n    this.FetchGit();\n  }\n\n  render() {\n    let renderInfo;\n    const {\n      githubData,\n      hasMore,\n      errorContent,\n      error\n    } = this.state;\n    renderInfo = /*#__PURE__*/_jsxDEV(Load, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 7\n    }, this);\n\n    if (githubData.length !== 0) {\n      renderInfo = /*#__PURE__*/_jsxDEV(InfiniteScroll, {\n        pageStart: 0,\n        loadMore: () => this.FetchGit(),\n        hasMore: hasMore,\n        loader: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              textAlign: 'center'\n            },\n            children: [/*#__PURE__*/_jsxDEV(Spinner, {\n              animation: \"border\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 201,\n              columnNumber: 17\n            }, this), \"\\u6B63\\u5728\\u67E5\\u627E\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 15\n          }, this)\n        }, 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 13\n        }, this),\n        children: /*#__PURE__*/_jsxDEV(Container, {\n          children: /*#__PURE__*/_jsxDEV(Row, {\n            children: githubData.map((item, index) => {\n              return /*#__PURE__*/_jsxDEV(Col, {\n                lg: 2,\n                md: 3,\n                sm: 4,\n                children: /*#__PURE__*/_jsxDEV(MyCard, {\n                  listNum: ++index,\n                  avatar: item.owner.avatar_url,\n                  name: item.name,\n                  starsCount: item.stargazers_count,\n                  forksCount: item.forks_count,\n                  openIssuesCount: item.open_issues_count,\n                  htmlUrl: item.html_url\n                }, index, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 211,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 210,\n                columnNumber: 19\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 9\n      }, this);\n    } else if (error) {\n      renderInfo = /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            textAlign: \"center\",\n            color: \"red\"\n          },\n          children: errorContent\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 9\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Container, {\n        style: {\n          marginTop: 30,\n          marginBottom: 30\n        },\n        children: /*#__PURE__*/_jsxDEV(Row, {\n          children: this.state.tabList.map((list, index) => {\n            return /*#__PURE__*/_jsxDEV(Col, {\n              children: /*#__PURE__*/_jsxDEV(NavLink, {\n                activeClassName: \"MyNavLink\",\n                to: {\n                  pathname: `/Popular`,\n                  search: `?language=${list.name}`\n                },\n                className: \"tab-list\",\n                \"data-filter\": list.name,\n                id: list.name,\n                onClick: e => this.switchTab(e, list),\n                children: list.name\n              }, index, false, {\n                fileName: _jsxFileName,\n                lineNumber: 245,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 244,\n              columnNumber: 17\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 9\n      }, this), renderInfo]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["C:/Users/Administrator/Desktop/lhh_react/my-app/src/pages/Popular/index.jsx"],"names":["React","Component","axios","NavLink","MyCard","Load","InfiniteScroll","Container","Row","Col","Spinner","Popular","constructor","props","switchTab","e","name","url","setState","githubData","tabName","tabUrl","pageNum","hasMore","error","setTimeout","FetchGit","state","tabList","count","loading","pageTotal","errorContent","obj","window","location","href","includes","arr","split","i","length","res","console","log","language","get","data","items","filterOption","document","getElementById","querySelectorAll","forEach","btn","classList","remove","add","response","message","concat","componentDidMount","render","renderInfo","textAlign","map","item","index","owner","avatar_url","stargazers_count","forks_count","open_issues_count","html_url","color","marginTop","marginBottom","list","pathname","search"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport axios from \"axios\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport MyCard from \"../../components/MyCard\";\r\nimport Load from \"../../components/Load\";\r\nimport InfiniteScroll from \"react-infinite-scroller\";\r\nimport { Container, Row, Col } from 'react-bootstrap';\r\nimport { Spinner } from 'react-bootstrap';\r\nexport default class Popular extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      tabList: [\r\n        {\r\n          name: \"All\",\r\n          url:\r\n            \"https://api.github.com/search/repositories?q=stars:%3E11&sort=stars&order=desc&type=Repositories&page=\",\r\n        },\r\n        {\r\n          name: \"java\",\r\n          url:\r\n            \"https://api.github.com/search/repositories?q=stars:%3E11+language:java&sort=stars&order=desc&type=Repositories&page=\",\r\n        },\r\n        {\r\n          name: \"javascript\",\r\n          url:\r\n            \"https://api.github.com/search/repositories?q=stars:%3E11+language:javascript&sort=stars&order=desc&type=Repositories&page=\",\r\n        },\r\n        {\r\n          name: \"css\",\r\n          url:\r\n            \"https://api.github.com/search/repositories?q=stars:%3E11+language:css&sort=stars&order=desc&type=Repositories&page=\",\r\n        },\r\n        {\r\n          name: \"ruby\",\r\n          url:\r\n            \"https://api.github.com/search/repositories?q=stars:%3E1+language:ruby&sort=stars&order=desc&type=Repositories&page=\",\r\n        },\r\n        {\r\n          name: \"python\",\r\n          url:\r\n            \"https://api.github.com/search/repositories?q=stars:%3E1+language:python&sort=stars&order=desc&type=Repositories&page=\",\r\n        },\r\n      ],\r\n      tabName: \"All\",\r\n      tabUrl:\r\n        \"https://api.github.com/search/repositories?q=stars:%3E11&sort=stars&order=desc&type=Repositories&page=\",\r\n      githubData: [],\r\n      count: 0,\r\n      loading: true,\r\n      pageNum: 1,\r\n      pageTotal: 5,\r\n      hasMore: true,\r\n      errorContent: {},\r\n      error: false,\r\n    };\r\n  }\r\n  switchTab = (e, { name, url }) => {\r\n    this.setState({\r\n      githubData: [],\r\n      tabName: name,\r\n      tabUrl: url,\r\n      pageNum: 1,\r\n      hasMore: true,\r\n      error: false\r\n    });\r\n    setTimeout(() => {\r\n      this.FetchGit();\r\n    }, 200);\r\n  };\r\n\r\n  //获得数据\r\n  async FetchGit() {\r\n    if (this.state.count === 0) {\r\n      // const name = localStorage.getItem(\"name\");\r\n      let obj = {};\r\n      // console.log(window.location.href);\r\n      if (window.location.href.includes(\"?\")) {\r\n        let arr = window.location.href.split(\"?\")[1].split(\"&\");\r\n        for (let i = 0; i < arr.length; i++) {\r\n          let res = arr[i].split(\"=\");\r\n          obj[res[0]] = res[1];\r\n        }\r\n      }\r\n      console.log(obj.language);\r\n      if (obj.language) {\r\n        try {\r\n          const tabUrl = `https://api.github.com/search/repositories?q=stars:%3E1+language:${obj.language}&sort=stars&order=desc&type=Repositories&page=`;\r\n          const url = tabUrl + this.state.pageNum;\r\n          const res = await axios.get(url);\r\n          // console.log(res);\r\n          this.setState({\r\n            githubData: res.data.items,\r\n            loading: false,\r\n            count: this.state.count + 1,\r\n            name: obj.language,\r\n            tabUrl: tabUrl,\r\n            pageNum: 2,\r\n          });\r\n          const filterOption = document.getElementById(obj.language);\r\n          // console.log(filterOption);\r\n          if (filterOption) {\r\n            document\r\n              .querySelectorAll(\".tab-list.active\")\r\n              .forEach((btn) => btn.classList.remove(\"active\"));\r\n            filterOption.classList.add(\"active\");\r\n          }\r\n        } catch (e) {\r\n          const errorContent = e.response.data.message;\r\n          this.setState({\r\n            githubData: [],\r\n            errorContent,\r\n            error: true,\r\n          });\r\n        }\r\n      } else {\r\n        const { pageNum, tabUrl, githubData, pageTotal } = this.state;\r\n        if (pageNum > pageTotal) {\r\n          this.setState({\r\n            hasMore: false,\r\n          });\r\n          return;\r\n        }\r\n        try {\r\n          const url = tabUrl + pageNum;\r\n          const res = await axios.get(url);\r\n          this.setState({\r\n            githubData: githubData.concat(res.data.items),\r\n            loading: false,\r\n            pageNum: pageNum + 1,\r\n          });\r\n          const filterOption = document.getElementById(\"All\");\r\n          if (filterOption) {\r\n            document\r\n              .querySelectorAll(\".tab-list.active\")\r\n              .forEach((btn) => btn.classList.remove(\"active\"));\r\n            filterOption.classList.add(\"active\");\r\n          }\r\n        } catch (e) {\r\n          const errorContent = e.response.data.message;\r\n          this.setState({\r\n            githubData: [],\r\n            errorContent,\r\n            error: true,\r\n          });\r\n        }\r\n      }\r\n    } else {\r\n      const { pageNum, tabUrl, githubData, pageTotal } = this.state;\r\n      if (pageNum > pageTotal) {\r\n        this.setState({\r\n          hasMore: false,\r\n        });\r\n        return;\r\n      }\r\n      try {\r\n        const url = tabUrl + pageNum;\r\n        const res = await axios.get(url)\r\n        // console.log(res);\r\n        this.setState({\r\n          githubData: githubData.concat(res.data.items),\r\n          loading: false,\r\n          pageNum: pageNum + 1,\r\n          error: false,\r\n        });\r\n      } catch (e) {\r\n        const errorContent = e.response.data.message;\r\n        // console.log(e.response.data.message);\r\n        this.setState({\r\n          githubData: [],\r\n          errorContent,\r\n          error: true,\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    document.querySelectorAll(\".tab-list.active\").forEach((btn) => {\r\n      btn.classList.remove(\"active\");\r\n    });\r\n    this.FetchGit();\r\n  }\r\n\r\n  render() {\r\n    let renderInfo;\r\n    const { githubData, hasMore, errorContent, error } = this.state;\r\n    renderInfo = (\r\n      <Load />\r\n    );\r\n    if (githubData.length !== 0) {\r\n      renderInfo = (\r\n\r\n        <InfiniteScroll\r\n          pageStart={0}\r\n          loadMore={() => this.FetchGit()}\r\n          hasMore={hasMore}\r\n          loader={\r\n            <div key={0}>\r\n              <div style={{ textAlign: 'center' }}>\r\n                <Spinner animation=\"border\" />正在查找\r\n              </div>\r\n            </div>\r\n          }\r\n        >\r\n          <Container>\r\n            <Row>\r\n              {githubData.map((item, index) => {\r\n                return (\r\n                  <Col lg={2} md={3} sm={4}>\r\n                    <MyCard\r\n                      key={index}\r\n                      listNum={++index}\r\n                      avatar={item.owner.avatar_url}\r\n                      name={item.name}\r\n                      starsCount={item.stargazers_count}\r\n                      forksCount={item.forks_count}\r\n                      openIssuesCount={item.open_issues_count}\r\n                      htmlUrl={item.html_url}\r\n                    />\r\n                  </Col>\r\n                );\r\n              })}\r\n            </Row>\r\n          </Container>\r\n        </InfiniteScroll>\r\n\r\n      );\r\n    } else if (error) {\r\n      renderInfo = (\r\n        <div>\r\n          <h3 style={{ textAlign: \"center\", color: \"red\" }}>\r\n            {errorContent}\r\n          </h3>\r\n        </div>\r\n      );\r\n    }\r\n    return (\r\n      <div>\r\n        <Container style = {{marginTop:30,marginBottom:30}}>\r\n          <Row>\r\n            {this.state.tabList.map((list, index) => {\r\n              return (\r\n                <Col>\r\n                  <NavLink\r\n                  activeClassName=\"MyNavLink\"\r\n                    to={{\r\n                      pathname: `/Popular`,\r\n                      search: `?language=${list.name}`,\r\n                    }}\r\n                    className=\"tab-list\"\r\n                    key={index}\r\n                    data-filter={list.name}\r\n                    id={list.name}\r\n                    onClick={(e) => this.switchTab(e, list)}\r\n                  >\r\n                    {list.name}\r\n                  </NavLink>\r\n                </Col>\r\n              );\r\n            })}\r\n          </Row>\r\n        </Container>\r\n\r\n        {renderInfo}\r\n\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}